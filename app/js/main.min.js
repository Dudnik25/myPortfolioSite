"use strict";window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(function(){e(+new Date)},1e3/60)};var content=document.querySelector(".content"),canvas=document.getElementById("canvasB"),ctx=canvas.getContext("2d"),width=window.innerWidth,height=window.innerHeight;ctx.canvas.width=width,ctx.canvas.height=height;var center={x:width/2,y:height/2},stars=[],starsCount=0;starsCount=width<1e3?200:600;var Z=.1,WarpZ=12,alpha=.25,lineW=5,WarpDrive=!1,cx=center.x-width/2+width/2,cy=center.y-height/2+height/2,cycle=0;function getRandomInt(e,t){return Math.floor(Math.random()*(t-e))+e}var speed=0;function warp(e){if(("KeyW"===e.code||119===e.keyCode||"touchstart"===e.type)&&(console.log("KeyW"+WarpDrive),!1===WarpDrive&&0===speed)){WarpDrive=!0,console.log("Warp Drive On!");var t=setInterval(function(){speed+=1,console.log("Warp Drive Speed: "+speed),Z+=.08,alpha-=.015,starsCount+=50,lineW+=.25,speed>=10&&clearInterval(t)},200)}if(("KeyS"===e.code||115===e.keyCode||"touchend"===e.type)&&(console.log("KeyS"+WarpDrive),!0===WarpDrive&&10===speed)){WarpDrive=!1,console.log("Warp Drive Off!");var n=setInterval(function(){speed-=1,console.log("Warp Drive Speed: "+speed),Z-=.08,alpha+=.015,starsCount-=50,lineW-=.25,speed<=0&&clearInterval(n)},100)}}function resize(){width=window.innerWidth,height=window.innerHeight,ctx.canvas.width=width,ctx.canvas.height=height,cx=(center={x:width/2,y:height/2}).x-width/2+width/2,cy=center.y-height/2+height/2}function starMove(){for(var e=0;e<stars.length;e++)stars[e].px<=width&&stars[e].px+cx>=0&&stars[e].py<=height&&stars[e].py+cy>=0&&stars[e].z>Z?(stars[e].px=stars[e].x/stars[e].z,stars[e].py=stars[e].y/stars[e].z,stars[e].o+=Z,stars[e].z-=Z):stars.splice(e,1)}function StarCreate(){if(stars.length<starsCount)for(var e=stars.length;e<starsCount;e++){var t={};t.x=(Math.random()*width-.5*width)*WarpZ,t.y=(Math.random()*height-.5*height)*WarpZ,t.z=WarpZ,t.c="rgba(140,"+getRandomInt(220,255)+",255, 1)",t.w=getRandomInt(1,5),t.px=0,t.py=0,stars.push(t)}}function render(){ctx.globalAlpha=alpha,ctx.fillStyle="rgba(0, 0, 0, 1)",ctx.fillRect(0,0,width,height),StarCreate(),starMove();for(var e=0;e<stars.length;e++){var t=stars[e];Math.random(),t.o;if(0!==t.px){var n=t.x/t.z,a=t.y/t.z;ctx.strokeStyle=t.c,ctx.lineWidth=getRandomInt(1,5),ctx.beginPath(),ctx.moveTo(n+cx,a+cy),ctx.lineTo(t.px+cx,t.py+cy),ctx.stroke()}}cycle+=.01,requestAnimationFrame(render)}window.addEventListener("keypress",warp),window.addEventListener("touchstart",warp),window.addEventListener("touchend",warp),window.addEventListener("resize",resize),content.addEventListener("animationend",function(e){"scale"===e.animationName&&(content.classList.remove("animscale"),content.classList.add("hidden")),"scale2"===e.animationName&&(content.style.opacity=1,content.classList.remove("animscale2"))}),render(),console.log(stars);